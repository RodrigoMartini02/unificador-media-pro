<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Satisfação</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="../src/css/quest.css">
</head>
<body>
    <div class="quest-container">
        <!-- Header -->
        <header class="quest-header">
            <div class="logo">
                <i class="fas fa-clipboard-list"></i>
                <h1>Pesquisa de Satisfação</h1>
            </div>
        </header>

        <!-- Identification Section -->
        <section id="identification-section" class="quest-section">
            <div class="section-content">
                <h2>Bem-vindo!</h2>
                <p class="section-description">
                    Sua opinião é muito importante para melhorarmos nossos serviços.
                    Por favor, preencha os dados abaixo para iniciar a pesquisa.
                </p>

                <form id="quest-form" class="quest-form">
                    <!-- Localização -->
                    <div class="form-group">
                        <label for="quest-state">Estado *</label>
                        <select id="quest-state" required>
                            <option value="">Selecione o Estado</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="quest-municipality">Município *</label>
                        <select id="quest-municipality" required>
                            <option value="">Selecione o Município</option>
                        </select>
                    </div>

                    <!-- Identificação (opcional) -->
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="quest-anonymous">
                            <span>Responder anonimamente</span>
                        </label>
                    </div>

                    <div class="identification-fields">
                        <div class="form-group">
                            <label for="quest-name">Nome (opcional)</label>
                            <input type="text" id="quest-name" placeholder="Seu nome">
                        </div>

                        <div class="form-group">
                            <label for="quest-position">Cargo (opcional)</label>
                            <input type="text" id="quest-position" placeholder="Seu cargo">
                        </div>
                    </div>

                    <button type="button" id="start-questionnaire" class="btn btn-primary btn-lg">
                        <i class="fas fa-arrow-right"></i> Iniciar Pesquisa
                    </button>
                </form>
            </div>
        </section>

        <!-- Questions Section -->
        <section id="questions-section" class="quest-section hidden">
            <div class="section-content">
                <!-- Questionnaire Info -->
                <div class="questionnaire-info">
                    <h2 id="questionnaire-title">Questionário</h2>
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <span class="progress-text">
                        Pergunta <span id="current-question-number">1</span> de <span id="total-questions">0</span>
                    </span>
                </div>

                <!-- Question Container -->
                <div id="question-container" class="question-container"></div>

                <!-- Navigation -->
                <div class="quest-navigation">
                    <button type="button" id="prev-question" class="btn btn-secondary" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Anterior
                    </button>
                    <button type="button" id="next-question" class="btn btn-primary">
                        Próxima <i class="fas fa-arrow-right"></i>
                    </button>
                    <button type="button" id="submit-questionnaire" class="btn btn-success" style="display: none;">
                        <i class="fas fa-check"></i> Enviar Respostas
                    </button>
                </div>
            </div>
        </section>

        <!-- Thank You Section -->
        <section id="thank-you-section" class="quest-section hidden">
            <div class="section-content thank-you-content">
                <div class="thank-you-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>Obrigado!</h2>
                <p>Sua resposta foi enviada com sucesso.</p>
                <p class="sub-text">Agradecemos por dedicar seu tempo para responder nossa pesquisa.</p>
                <button type="button" onclick="publicForm.restart()" class="btn btn-primary">
                    <i class="fas fa-redo"></i> Responder Novamente
                </button>
            </div>
        </section>

        <!-- Loader -->
        <div id="quest-loader" class="loader hidden">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Carregando...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../src/js/core/api.js"></script>
    <script src="../src/js/core/auth.js"></script>
    <script src="../src/js/quest/PublicQuestionnaireForm.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.publicForm.init();
        });
    </script>
</body>
</html>
